<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://www.gla.ac.uk/3t4/img/hd_hi.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />

    <title>HIA Demo02</title>
  </head>
  <body>
    <div class="container" style="margin-top: 80px">
      <h2>D3 how to 01</h2>
      <div class="row">
        <div id="bar"></div>
        <div id="scatter"></div>
      </div>
      <button class="btn btn-primary tablinks" onclick="newdata()">
        newdata
      </button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <script src="../js/Bar.js"></script>
    <script src="../js/Scatter.js"></script>

    <script>
      dataBar = [
        { name: "A", val: 50 },
        { name: "B", val: 30 },
        { name: "C", val: 70 },
      ];
      document.getElementById("bar").innerHTML = "";
      bar = new BarChart("#bar", 400, 400);
      bar.draw(dataBar, "name", "val", "tomato");

      const numPoints = 100;
      const dataSCatter = [];
      for (let i = 0; i < numPoints; i++) {
        dataSCatter.push({
          id: i,
          x: Math.random() * 100,
          y: Math.random() * 100,
        });
      }
      document.getElementById("scatter").innerHTML = "";
      scatter = new ScatterPlot("#scatter", 400, 400);
      scatter.draw(dataSCatter, "x", "y", "tomato", "id");

      var newdata = function () {
        for (let i = 0; i < numPoints; i++) {
          dataSCatter[i].x = Math.random() * 200;
        }
        dataSCatter.sort(function (first, second) {
          return second["x"] - first["x"];
        });
        scatter.draw(dataSCatter, "x", "y", "tomato", "id");
      };
    </script>
  </body>
</html>
